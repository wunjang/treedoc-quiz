<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì¶œë¬¸ì œ ìŠ¤ë§ˆíŠ¸ ë·°ì–´</title>
    <style>
        :root { --primary-color: #4a90e2; --bg-color: #f5f7fa; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg-color); margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        
        /* ì»¨íŠ¸ë¡¤ ì„¹ì…˜ */
        .controls { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; position: sticky; top: 10px; z-index: 100; }
        .tag-container { margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap; }
        .tag { padding: 5px 12px; background: #e0e6ed; border-radius: 20px; cursor: pointer; font-size: 0.9em; transition: 0.2s; }
        .tag.active { background: var(--primary-color); color: white; }
        
        /* ë¬¸ì œ ì¹´ë“œ */
        .q-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .q-header { color: #666; font-size: 0.85em; margin-bottom: 10px; display: flex; justify-content: space-between; }
        .q-text { font-size: 1.1em; font-weight: 600; margin-bottom: 15px; line-height: 1.5; }
        .q-image { max-width: 100%; border-radius: 8px; margin-bottom: 15px; border: 1px solid #eee; }
        .options { display: grid; gap: 10px; }
        .opt { padding: 12px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; }
        .opt:hover { background: #f0f7ff; }
        
        /* ì •ë‹µ/í•´ì„¤ ì˜ì—­ */
        .answer-box { margin-top: 15px; padding: 15px; background: #f0fff4; border-radius: 8px; border-left: 5px solid #48bb78; display: none; }
        .answer-box.visible { display: block; }
        
        .btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-toggle { background: #4a90e2; color: white; width: 100%; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="controls">
        <h2>ğŸ“ ê¸°ì¶œë¬¸ì œ ê³µë¶€ë°©</h2>
        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
            <select id="sortOrder" onchange="renderQuestions()">
                <option value="asc">íšŒì°¨/ë²ˆí˜¸ìˆœ â†‘</option>
                <option value="desc">íšŒì°¨/ë²ˆí˜¸ìˆœ â†“</option>
            </select>
            <button class="btn" onclick="toggleAllAnswers()">ì •ë‹µ ëª¨ë‘ ë³´ê¸°/ê°€ë¦¬ê¸°</button>
        </div>
        <div class="tag-container" id="tagList">
            </div>
    </div>

    <div id="questionList">
        </div>
</div>

<script>
    // ì‹¤ì œë¡œëŠ” fetch('data.json')ìœ¼ë¡œ ê°€ì ¸ì˜¬ ë°ì´í„°
    const mockData = [
        { id: 1, session: "2023-01", number: 1, tags: ["ë„¤íŠ¸ì›Œí¬", "OSI"], question: "OSI 7ê³„ì¸µ ì¤‘ ì „ì†¡ ê³„ì¸µì˜ í”„ë¡œí† ì½œì€?", image: null, options: ["HTTP", "TCP", "IP", "Ethernet"], answer: 1, explanation: "TCPì™€ UDPëŠ” 4ê³„ì¸µ(ì „ì†¡) í”„ë¡œí† ì½œì…ë‹ˆë‹¤." },
        { id: 2, session: "2023-01", number: 2, tags: ["DB", "SQL"], question: "SQLì—ì„œ ë°ì´í„° ì‚­ì œ ëª…ë ¹ì–´ëŠ”?", image: "https://via.placeholder.com/400x150?text=Sample+Image", options: ["DELETE", "REMOVE", "DROP", "TRUNCATE"], answer: 0, explanation: "DELETEëŠ” í–‰ì„ ì‚­ì œí•˜ëŠ” DMLì…ë‹ˆë‹¤." },
        { id: 3, session: "2022-03", number: 5, tags: ["ë„¤íŠ¸ì›Œí¬", "IP"], question: "IPv6ì˜ ë¹„íŠ¸ ìˆ˜ëŠ”?", image: null, options: ["32ë¹„íŠ¸", "64ë¹„íŠ¸", "128ë¹„íŠ¸", "256ë¹„íŠ¸"], answer: 2, explanation: "IPv6ëŠ” 128ë¹„íŠ¸ ì£¼ì†Œ ì²´ê³„ë¥¼ ê°€ì§‘ë‹ˆë‹¤." }
    ];

    let currentTag = 'ì „ì²´';
    let showAllAnswers = false;

    // ì´ˆê¸°í™”
    function init() {
        renderTags();
        renderQuestions();
    }

    // íƒœê·¸ ëª©ë¡ ë Œë”ë§
    function renderTags() {
        const tags = ['ì „ì²´', ...new Set(mockData.flatMap(q => q.tags))];
        const tagList = document.getElementById('tagList');
        tagList.innerHTML = tags.map(tag => 
            `<span class="tag ${tag === currentTag ? 'active' : ''}" onclick="filterByTag('${tag}')">${tag}</span>`
        ).join('');
    }

    function filterByTag(tag) {
        currentTag = tag;
        renderTags();
        renderQuestions();
    }

    function toggleAllAnswers() {
        showAllAnswers = !showAllAnswers;
        renderQuestions();
    }

    // ë¬¸ì œ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
    function renderQuestions() {
        const listElement = document.getElementById('questionList');
        const sortOrder = document.getElementById('sortOrder').value;

        let filtered = currentTag === 'ì „ì²´' 
            ? [...mockData] 
            : mockData.filter(q => q.tags.includes(currentTag));

        // ì •ë ¬: íšŒì°¨ -> ë²ˆí˜¸ ìˆœ
        filtered.sort((a, b) => {
            const res = a.session.localeCompare(b.session);
            return sortOrder === 'asc' ? (res || a.number - b.number) : -(res || a.number - b.number);
        });

        listElement.innerHTML = filtered.map(q => `
            <div class="q-card">
                <div class="q-header">
                    <span>${q.session}íšŒì°¨ | ${q.number}ë²ˆ</span>
                    <span>${q.tags.join(', ')}</span>
                </div>
                <div class="q-text">${q.question}</div>
                ${q.image ? `<img src="${q.image}" class="q-image">` : ''}
                <div class="options">
                    ${q.options.map((opt, i) => `<div class="opt">${i+1}. ${opt}</div>`).join('')}
                </div>
                <button class="btn btn-toggle" onclick="this.nextElementSibling.classList.toggle('visible')">ì •ë‹µ í™•ì¸</button>
                <div class="answer-box ${showAllAnswers ? 'visible' : ''}">
                    <strong>ì •ë‹µ: ${q.answer + 1}</strong><br>
                    <small>${q.explanation}</small>
                </div>
            </div>
        `).join('');
    }

    init();
</script>
</body>
</html>