<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì¶œë¬¸ì œ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì‹œìŠ¤í…œ</title>
    <style>
        :root { --primary: #3b82f6; --secondary: #10b981; --accent: #f59e0b; --bg: #f8fafc; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); padding: 20px; color: #1e293b; }
        .container { max-width: 900px; margin: 0 auto; }

        /* í•„í„° íŒ¨ë„ */
        .filter-panel { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-bottom: 20px; position: sticky; top: 10px; z-index: 100; }
        .filter-row { margin-bottom: 15px; }
        .label { font-weight: bold; display: block; margin-bottom: 8px; color: #64748b; font-size: 0.9em; }
        
        .tag-group { display: flex; flex-wrap: wrap; gap: 8px; }
        .tag { padding: 6px 14px; background: #f1f5f9; border-radius: 50px; cursor: pointer; font-size: 0.85em; border: 1px solid #e2e8f0; transition: 0.2s; }
        .tag.session.active { background: var(--secondary); color: white; }
        .tag.subject.active { background: var(--primary); color: white; }

        /* í‚¤ì›Œë“œ ê²€ìƒ‰ì°½ ë° ìë™ì™„ì„± */
        .search-container { position: relative; width: 100%; }
        #keywordInput { width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #e2e8f0; box-sizing: border-box; outline: none; }
        #keywordInput:focus { border-color: var(--accent); }
        .autocomplete-list { position: absolute; width: 100%; background: white; border: 1px solid #e2e8f0; border-top: none; max-height: 200px; overflow-y: auto; z-index: 101; display: none; border-radius: 0 0 8px 8px; }
        .autocomplete-item { padding: 10px; cursor: pointer; border-bottom: 1px solid #f1f5f9; }
        .autocomplete-item:hover { background: #fef3c7; }

        /* ì„ íƒëœ í‚¤ì›Œë“œ ì¹© */
        .selected-keywords { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .kw-chip { background: var(--accent); color: white; padding: 5px 12px; border-radius: 4px; display: flex; align-items: center; gap: 8px; font-size: 0.85em; }
        .kw-chip span { cursor: pointer; font-weight: bold; }

        /* ë¬¸ì œ ì¹´ë“œ */
        .q-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #e2e8f0; }
        .ans-section { display: none; margin-top: 15px; padding: 15px; background: #f0fdf4; border-left: 4px solid #22c55e; }
        .ans-section.show { display: block; }
        .btn-ans { width: 100%; margin-top: 10px; padding: 8px; cursor: pointer; background: #f8fafc; border: 1px solid #cbd5e1; border-radius: 6px; }
    </style>
</head>
<body>

<div class="container">
    <div class="filter-panel">
        <div class="filter-row">
            <span class="label">ğŸ“… íšŒì°¨ (OR)</span>
            <div id="sessionGroup" class="tag-group"></div>
        </div>
        <div class="filter-row">
            <span class="label">ğŸ“˜ ê³¼ëª© (OR)</span>
            <div id="subjectGroup" class="tag-group"></div>
        </div>
        <div class="filter-row">
            <span class="label">ğŸ” í‚¤ì›Œë“œ ê²€ìƒ‰ (AND - ì…ë ¥ í›„ ì„ íƒ)</span>
            <div class="search-container">
                <input type="text" id="keywordInput" placeholder="í‚¤ì›Œë“œ ì…ë ¥ (ì˜ˆ: SQL, OSI...)" oninput="handleSearch(this.value)">
                <div id="autocompleteList" class="autocomplete-list"></div>
            </div>
            <div id="keywordChips" class="selected-keywords"></div>
        </div>
        <div style="text-align: right; border-top: 1px solid #eee; padding-top: 10px;">
            <span id="resultCount" style="font-weight: bold; color: var(--primary);"></span>
            <button onclick="resetAll()" style="margin-left:15px; cursor:pointer;">ì´ˆê¸°í™”</button>
        </div>
    </div>

    <div id="questionList"></div>
</div>

// ... (ê¸°ì¡´ HTML/CSSëŠ” ìœ ì§€)

<script>
    let questions = [];
    let selectedSessions = new Set();
    let selectedSubjects = new Set();
    let selectedKeywords = new Set();
    let allUniqueKeywords = [];

    // [í•µì‹¬ ìˆ˜ì •] ê°€ì§œ ë°ì´í„° ëŒ€ì‹  ì‹¤ì œ JSON íŒŒì¼ì„ ì½ì–´ì˜µë‹ˆë‹¤.
    async function loadData() {
        try {
            // íŒŒì¼ ì´ë¦„ì„ ì •í™•íˆ questions.jsonìœ¼ë¡œ ë§ì¶°ì£¼ì„¸ìš”.
            const response = await fetch('questions.json');
            
            if (!response.ok) {
                throw new Error('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }

            questions = await response.json();
            
            // ë°ì´í„°ê°€ ë¡œë“œëœ í›„ í•„í„°ì™€ í‚¤ì›Œë“œë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
            initFilters();
            processAndRender();
        } catch (error) {
            console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", error);
            document.getElementById('questionList').innerHTML = 
                `<p style="color:red; text-align:center;">ë°ì´í„° ë¡œë”© ì‹¤íŒ¨: ${error.message}<br>
                (ì£¼ì˜: ì„œë²„ í™˜ê²½ì´ë‚˜ GitHub Pagesì—ì„œ ì‹¤í–‰í•´ì•¼ íŒŒì¼ ì½ê¸°ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.)</p>`;
        }
    }

    // (ê¸°ì¡´ initFilters, toggleFilter, handleSearch, processAndRender í•¨ìˆ˜ë“¤ì€ ë™ì¼í•˜ê²Œ ìœ ì§€)

    // ë¬¸ì œ ë Œë”ë§ í•¨ìˆ˜ (ë³´ê¸°ê°€ ì•ˆ ë³´ì˜€ë˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ q.options ì²´í¬ ì¶”ê°€)
    function renderQuestions(data) {
        const display = document.getElementById('questionList');
        display.innerHTML = data.map(q => `
            <div class="q-card">
                <small style="color:#64748b">${q.session} | ${q.subject} | ${q.number}ë²ˆ</small>
                <div style="font-weight:bold; margin: 10px 0; font-size:1.1em;">${q.question}</div>
                ${q.image ? `<img src="${q.image}" class="q-image" style="max-width:100%; margin-bottom:10px; border-radius:8px;">` : ''}
                
                <div class="options-list" style="display:grid; gap:8px;">
                    ${q.options ? q.options.map((opt, i) => `
                        <div style="padding:10px; border:1px solid #eee; border-radius:6px; background:#fafafa;">
                            ${i + 1}. ${opt}
                        </div>
                    `).join('') : '<p>ë³´ê¸°ê°€ ì—†ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.</p>'}
                </div>

                <button class="btn-ans" onclick="this.nextElementSibling.classList.toggle('show')">ì •ë‹µ í™•ì¸</button>
                <div class="ans-section" style="display:none; margin-top:10px; padding:15px; background:#f0fdf4; border-left:4px solid #22c55e;">
                    <strong>ì •ë‹µ: ${q.answer + 1}</strong>
                    <div style="margin-top:5px; font-size:0.9em;">${q.explanation}</div>
                </div>
            </div>
        `).join('');
    }

    // ì‹¤í–‰ ì‹œì‘
    loadData();
</script>
</body>
</html>